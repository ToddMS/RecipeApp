import {Recipe} from "./recipe.model";
import {Injectable} from "@angular/core";
import {Ingredient} from "../shared/ingredient.model";
import {ShoppingListService} from "../shopping-list/shopping-list.service";
import {Subject} from "rxjs";

@Injectable()
export class RecipeService {
  recipesChanged = new Subject<Recipe[]>

  private recipes: Recipe[] = [
    new Recipe(
      "Lasagne",
      "A multi-layered pasta dish",
      "https://www.malteskitchen.de/wp-content/uploads/2022/09/lasagne-bolognese-8-500x500.jpg",
      [
        new Ingredient("Pasta", 5),
        new Ingredient("Bolognase", 1),
        new Ingredient("White Sauce", 1)]
    ),
    new Recipe(
      "Not Lasagne",
      "Not a multi-layered pasta dish",
      "data:image/jpeg;base64,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"
    ,[new Ingredient("Not Pasta", 5),
        new Ingredient("Not Bolognase", 1),
        new Ingredient("Not White Sauce", 1)])
  ];

  constructor(private shoppingListService: ShoppingListService) { }

  getRecipes() {
    return this.recipes.slice();
  }

  addIngredientsToShoppingList(ingredients: Ingredient[]){
    this.shoppingListService.addIngredients(ingredients);
  }

  getRecipe(index: number): Recipe {
    return this.recipes[index];
  }

  addRecipe(recipe: Recipe) {
    this.recipes.push(recipe);
    this.recipesChanged.next(this.recipes.slice());
  }

  updateRecipe(index: number, newRecipe: Recipe) {
    this.recipes[index] = newRecipe
    this.recipesChanged.next(this.recipes.slice());
  }

  deleteRecipe(index: number) {
    this.recipes.splice(index - 1);
    this.recipesChanged.next(this.recipes.slice());
  }

}
